# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## ν”„λ΅μ νΈ κ°μ”

μ΄ ν”„λ΅μ νΈλ” React, TypeScript, Three.js/React Three Fiberλ΅ κµ¬μ¶•λ λ²”μ© GLB 3D λ¨λΈ μ»¨ν”Όκ·λ μ΄ν„°μ…λ‹λ‹¤. μ‚¬μ©μκ°€ μ—¬λ¬ GLB νμΌμ„ λ΅λ“ν•κ³  κ°λ³„ λ¨Έν‹°λ¦¬μ–Ό μƒ‰μƒμ„ μ‹¤μ‹κ°„μΌλ΅ μμ •ν•  μ μλ” μ• ν”λ¦¬μΌ€μ΄μ…μ…λ‹λ‹¤. μλ™μ°¨ μ»¨ν”Όκ·λ μ΄ν„°μ—μ„ μκ°μ„ λ°›μ€ μ „λ¬Έμ μΈ λ‹¤ν¬ ν…λ§ UIμ™€ λ΅κ³  λΈλλ”©, μ΄λ―Έμ§€ λ‚΄λ³΄λ‚΄κΈ° κΈ°λ¥μ„ κ°–μ¶”κ³  μμµλ‹λ‹¤.

## κ°λ° λ…λ Ήμ–΄

```bash
# κ°λ° μ„λ²„ μ‹μ‘
npm run dev

# ν”„λ΅λ•μ… λΉλ“  
npm run build

# λ¦°ν… μ‹¤ν–‰
npm run lint

# ν”„λ΅λ•μ… λΉλ“ λ―Έλ¦¬λ³΄κΈ°
npm run preview
```

## μ•„ν‚¤ν…μ²

### ν•µμ‹¬ κµ¬μ„± μ‹μ¤ν…
- **`/public/config.json`**: λ¨λΈ λ΅λ”©μ„ μ„ν• λ™μ  κµ¬μ„±
  - `models`: `name`κ³Ό `path` μ†μ„±μ„ κ°€μ§„ λ¨λΈ κ°μ²΄ λ°°μ—΄
  - `selectedModel`: λ΅λ“ μ‹ ν‘μ‹ν•  κΈ°λ³Έ λ¨λΈ μΈλ±μ¤
  - `modelScale`: 3D λ¨λΈμ μ¤μΌ€μΌλ§ ν©ν„°
  - `modelPosition`: 3D λ¨λΈμ μ„μΉ [x, y, z]
  - `cameraPosition`: μ΄κΈ° μΉ΄λ©”λΌ μ„μΉ [x, y, z]
  - `backgroundColor`: UI λ°°κ²½μƒ‰ (ν„μ¬ λ―Έμ‚¬μ©)

### μ»΄ν¬λ„νΈ μ•„ν‚¤ν…μ²
- **`App.tsx`**: μ„¤μ •μ„ λ΅λ“ν•κ³  μ „μ—­ μƒνƒλ¥Ό κ΄€λ¦¬ν•λ” λ£¨νΈ μ»΄ν¬λ„νΈ
  - λ‹¤μ¤‘ λ¨λΈ μ„ νƒ μ‹μ¤ν… μ²λ¦¬
  - λ¨λΈ λ³€κ²½ μ‹ λ¨Έν‹°λ¦¬μ–Ό μƒνƒ κ΄€λ¦¬
  - μ»¤μ¤ν…€ μ΄λ²¤νΈ μ‹μ¤ν…μ„ ν†µν• λ‹¤μ΄λ΅λ“ κΈ°λ¥ ν†µν•©
  - "Uable Configurator" λΈλλ”© ν‘μ‹
  - λ‹¤μ΄λ΅λ“ μ•„μ΄μ½μ€ `/src/assets/icons/download.svg` μ‚¬μ©
- **`Scene.tsx`**: μ΅°λ…, μ»¨νΈλ΅¤, ν™κ²½μ΄ μ„¤μ •λ 3D μ”¬
- **`ModelViewer.tsx`**: μλ™ λ¨Έν‹°λ¦¬μ–Ό νƒμƒ‰ κΈ°λ¥μ΄ μλ” GLB λ΅λ”
- **`MaterialList.tsx`**: λ¨Έν‹°λ¦¬μ–Ό μ„ νƒ λ° μƒ‰μƒ λ³€κ²½μ„ μ„ν• UI μ»΄ν¬λ„νΈ
- **`DownloadController.tsx`**: μ΄λ―Έμ§€ μΊ΅μ²λ¥Ό μ„ν• μΊ”λ²„μ¤ ν†µν•© μ»΄ν¬λ„νΈ
  - ν¬λ… λ°°κ²½μΌλ΅ 3D μ”¬μ„ PNGλ΅ μΊ΅μ²
  - μ»¤μ¤ν…€ μλ„μ° μ΄λ²¤νΈ 'capture-3d-scene'λ΅ νΈλ¦¬κ±°
  - μλ™ νƒ€μ„μ¤νƒ¬ν”„ νμΌλ… μƒμ„±
- **`DownloadButton.tsx`**: μ§μ ‘ μ”¬ μΊ΅μ²λ¥Ό μ„ν• λ…λ¦½ν• λ²„νΌ μ»΄ν¬λ„νΈ (λ€μ²΄ κµ¬ν„)

### 3D λ λ”λ§ νμ΄ν”„λΌμΈ
1. **λ¨λΈ λ΅λ”©**: `@react-three/drei` `useGLTF` ν›… μ‚¬μ©
2. **λ¨Έν‹°λ¦¬μ–Ό νƒμƒ‰**: μ „μ²΄ μ”¬ κ·Έλν”„λ¥Ό μνν•μ—¬ λ¨λ“  λ¨Έν‹°λ¦¬μ–Ό μμ§‘
3. **PBR λ λ”λ§**: μ‚¬μ‹¤μ μΈ λ¬Όλ¦¬ κΈ°λ° λ λ”λ§ κµ¬μ„±
   - ACESFilmicToneMapping
   - SRGB μƒ‰μƒ κ³µκ°„
   - "studio" ν”„λ¦¬μ…‹μΌλ΅ ν™κ²½ λ§¤ν•‘
   - μ΄λ―Έμ§€ μΊ΅μ²λ¥Ό μ„ν• preserveDrawingBuffer ν™μ„±ν™”
4. **λ¨Έν‹°λ¦¬μ–Ό μ—…λ°μ΄νΈ**: Three.js `needsUpdate` ν¨ν„΄μ„ μ‚¬μ©ν• μ‹¤μ‹κ°„ μƒ‰μƒ λ³€κ²½

### μ£Όμ” κΈ°μ  ν¨ν„΄

**λ‹¤μ¤‘ λ¨λΈ μ‹μ¤ν…**:
```typescript
const handleModelChange = (index: number) => {
  setSelectedModelIndex(index)
  setMaterials({}) // μƒ λ¨λΈμ„ μ„ν• λ¨Έν‹°λ¦¬μ–Ό μ΄κΈ°ν™”
}
```

**λ¨Έν‹°λ¦¬μ–Ό μμ§‘**:
```typescript
scene.traverse((child) => {
  if (child instanceof THREE.Mesh) {
    // λ‹¨μΌ λ¨Έν‹°λ¦¬μ–Όκ³Ό λ¨Έν‹°λ¦¬μ–Ό λ°°μ—΄ λ¨λ‘ μμ§‘
    // μ΄λ¦„ μ—†λ” λ¨Έν‹°λ¦¬μ–Όμ€ ν΄λ°± λ„¤μ΄λ°μΌλ΅ μ²λ¦¬
  }
})
```

**μ‹¤μ‹κ°„ μƒ‰μƒ μ—…λ°μ΄νΈ**:
```typescript
material.color = new THREE.Color(hexColor)
material.needsUpdate = true
```

**μ΄λ―Έμ§€ λ‚΄λ³΄λ‚΄κΈ° μ‹μ¤ν…**:
```typescript
// UIμ—μ„ μ»¤μ¤ν…€ μ΄λ²¤νΈ λ””μ¤ν¨μΉ
window.dispatchEvent(new CustomEvent('capture-3d-scene'))

// ν¬λ… λ°°κ²½μΌλ΅ μΊ”λ²„μ¤ μΊ΅μ²
scene.background = null
gl.render(scene, camera)
gl.domElement.toBlob(callback, 'image/png', 1.0)
```

**μΊ”λ²„μ¤ κµ¬μ„±**:
- κ³ μ„±λ¥ WebGL μ„¤μ •
- μ‚¬μ‹¤μ μΈ λ¨Έν‹°λ¦¬μ–Όμ„ μ„ν• μ μ ν• ν†¤ λ§¤ν•‘
- μΈν„°λ™ν‹°λΈ μΉ΄λ©”λΌ μ›€μ§μ„μ„ μ„ν• OrbitControls
- μ΄λ―Έμ§€ μΊ΅μ² κΈ°λ¥μ„ μ„ν• preserveDrawingBuffer

### μ¤νƒ€μΌλ§ μ‹μ¤ν…
- μ»΄ν¬λ„νΈ μ¤μ½”ν”„ μ¤νƒ€μΌλ§μ„ μ„ν• CSS λ¨λ“
- κΈ€λμ¤ λ¨ν”Όμ¦ ν¨κ³Όκ°€ μλ” λ‹¤ν¬ ν…λ§
- μ „λ¬Έμ μΈ ν”λ΅ν… μ»¨νΈλ΅¤ ν¨λ„ λ””μμΈ
- μ¤ν¬λ΅¤ κΈ°λ¥μ„ μ μ§€ν•λ©΄μ„ μ¨κ²¨μ§„ μ¤ν¬λ΅¤λ°”
- λ¨λν• νƒ€μ΄ν¬κ·Έλν”Όλ¥Ό μ„ν• Inter ν°νΈ ν¨λ°€λ¦¬

### λ°μ‘ν• λ””μμΈ
- **λ°μ¤ν¬ν†±**: μ‚¬μ΄λ“ ν¨λ„ ν•νƒμ μ»¨νΈλ΅¤
- **λ¨λ°”μΌ** (`max-width: 768px`): μμ§ λ μ΄μ•„μ›ƒμΌλ΅ μ „ν™
  - μƒλ‹¨: 3D λ·°μ–΄ (3:2 λΉ„μ¨, μµλ€ 45vh)
  - ν•λ‹¨: λ¨Έν‹°λ¦¬μ–Ό μ»¨νΈλ΅¤ ν¨λ„ (λ‚¨μ€ κ³µκ°„ ν™μ©)
  - μ°μΈ΅ μ—¬λ°± ν™•λ³΄λ¥Ό μ„ν• νΉλ³„ν• λ μ΄μ•„μ›ƒ μ²λ¦¬

### UI κΈ°λ¥
- **λ΅κ³  ν‘μ‹**: μΆμΈ΅ μƒλ‹¨μ "Uable Configurator" λΈλλ”©
- **λ¨λΈ μ„ νƒκΈ°**: μ—¬λ¬ λ¨λΈ κ°„ μ „ν™μ„ μ„ν• λ“λ΅­λ‹¤μ΄
- **λ‹¤μ΄λ΅λ“ λ²„νΌ**: μ΄λ―Έμ§€ λ‚΄λ³΄λ‚΄κΈ°λ¥Ό μ„ν• λ‹¤μ΄λ΅λ“ μ•„μ΄μ½μ΄ μλ” ν”λ΅ν… λ²„νΌ
- **λ¬Έμ λ²„νΌ**: μ‚¬μ©μ λ¬Έμλ¥Ό μ„ν• ν•λ‹¨ λ²„νΌ

## νμΌ κµ¬μ΅°
```
src/
β”β”€β”€ assets/
β”‚   β””β”€β”€ icons/
β”‚       β””β”€β”€ download.svg    # λ‹¤μ΄λ΅λ“ λ²„νΌ μ•„μ΄μ½
β”β”€β”€ components/
β”‚   β”β”€β”€ Scene.tsx           # 3D μ”¬ μ„¤μ •
β”‚   β”β”€β”€ ModelViewer.tsx     # GLB λ΅λ”© λ° λ¨Έν‹°λ¦¬μ–Ό νƒμƒ‰
β”‚   β”β”€β”€ MaterialList.tsx    # λ¨Έν‹°λ¦¬μ–Ό UI μ»¨νΈλ΅¤
β”‚   β”β”€β”€ DownloadController.tsx # μ”¬ μΊ΅μ² μ»¨νΈλ΅¤λ¬
β”‚   β”β”€β”€ DownloadButton.tsx  # λ€μ²΄ λ‹¤μ΄λ΅λ“ μ»΄ν¬λ„νΈ
β”‚   β””β”€β”€ *.module.css        # μ»΄ν¬λ„νΈ μ¤νƒ€μΌ
β”β”€β”€ App.tsx                 # λ‹¤μ¤‘ λ¨λΈ μ§€μ› λ£¨νΈ μ»΄ν¬λ„νΈ
β””β”€β”€ App.module.css         # λ©”μΈ λ μ΄μ•„μ›ƒ μ¤νƒ€μΌ
public/
β”β”€β”€ config.json            # λ™μ  λ¨λΈ κµ¬μ„±
β”β”€β”€ models/                # GLB νμΌ μ €μ¥μ† (bmw.glb, maybach.glb, sl63.glb)
β””β”€β”€ textures/              # λ°”λ‹¥λ©΄ ν…μ¤μ²
```

## μƒ λ¨λΈ μ¶”κ°€ν•κΈ°
1. GLB νμΌμ„ `/public/models/`μ— λ°°μΉ
2. `/public/config.json`μ— λ¨λΈ ν•­λ© μ¶”κ°€:
   ```json
   {"name": "λ¨λΈ μ΄λ¦„", "path": "/models/filename.glb"}
   ```
3. ν•„μ”μ‹ λ¨λ“  λ¨λΈμ— λ€ν•΄ `modelScale`, `modelPosition`, `cameraPosition` μ΅°μ •
4. μ• ν”λ¦¬μΌ€μ΄μ…μ΄ GLB νμΌμ λ¨λ“  λ¨Έν‹°λ¦¬μ–Όμ„ μλ™μΌλ΅ νƒμƒ‰

## λ¨Έν‹°λ¦¬μ–Ό μ‹μ¤ν…
μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μλ™μΌλ΅ μ²λ¦¬ν•λ” ν•­λ©:
- MeshStandardMaterial λ° MeshPhysicalMaterial νƒ€μ…
- λ©”μ‹λ‹Ή λ‹¨μΌ λ¨Έν‹°λ¦¬μ–Ό λ° λ¨Έν‹°λ¦¬μ–Ό λ°°μ—΄
- μ΄λ¦„ μ—†λ” λ¨Έν‹°λ¦¬μ–Ό (μλ™ μ΄λ¦„ μƒμ„±)
- μ μ ν• Three.js λ¦¬ν”„λ μ‹ ν¨ν„΄μ„ μ‚¬μ©ν• μ‹¤μ‹κ°„ μƒ‰μƒ μ—…λ°μ΄νΈ
- κΉ¨λ—ν• μƒνƒλ¥Ό μ„ν• λ¨λΈ λ³€κ²½ μ‹ λ¨Έν‹°λ¦¬μ–Ό μ΄κΈ°ν™”

## μ΄λ―Έμ§€ λ‚΄λ³΄λ‚΄κΈ° κΈ°λ¥
- ν„μ¬ 3D μ”¬ λ·°λ¥Ό PNGλ΅ μΊ΅μ²
- ν•©μ„±μ„ μ„ν• ν¬λ… λ°°κ²½
- μλ™ νƒ€μ„μ¤νƒ¬ν”„ νμΌλ… (ν•μ‹: `3d-model-YYYY-MM-DD-HH-mm-ss.png`)
- ν„μ¬ μΉ΄λ©”λΌ κ°λ„ λ° λ¨Έν‹°λ¦¬μ–Ό μ„¤μ • λ³΄μ΅΄
- 1.0 ν’μ§ μ„¤μ •μΌλ΅ κ³ ν’μ§ λ‚΄λ³΄λ‚΄κΈ°

## κ°λ° ν™κ²½

### TypeScript μ„¤μ •
- **μ»΄νμΌ**: `tsc -b && vite build`λ΅ νƒ€μ… μ²΄ν¬μ™€ λΉλ“ μν–‰
- **ν”„λ΅μ νΈ λ νΌλ°μ¤**: `tsconfig.app.json`, `tsconfig.node.json` λ¶„λ¦¬
- **μ—„κ²©ν• νƒ€μ… μ²΄ν¬**: `@typescript-eslint/no-explicit-any` κ·μΉ™ μ μ©

### μ•λ ¤μ§„ μ΄μ
- **λ¦°ν… μ—λ¬**: μΌλ¶€ νμΌμ—μ„ `any` νƒ€μ… μ‚¬μ© (κΈ°λ¥μ—λ” μν–¥ μ—†μ)
  - `DownloadController.tsx`: 2κ³³
  - `MaterialList.tsx`: 2κ³³  
  - `ModelViewer.tsx`: 1κ³³
- **λ²λ“¤ ν¬κΈ°**: Three.jsλ΅ μΈν•΄ 1.2MB (μ •μƒ λ²”μ„)

### Vite μ„¤μ •
- **κ°λ° μ„λ²„**: Hot Module Replacement (HMR) μ§€μ›
- **React Plugin**: `@vitejs/plugin-react` μ‚¬μ©
- **λΉλ“**: ν”„λ΅λ•μ… μµμ ν™”λ λ²λ“¤ μƒμ„±

## Git μ»¤λ°‹ μ •μ±…

**μ¤‘μ”**: Git μ»¤λ°‹ μ‹ λ‹¤μ μ‚¬ν•­μ„ μ¤€μν•΄μ•Ό ν•©λ‹λ‹¤:

- **Claude Code μΉ΄ν”ΌλΌμ΄νΈ κΈμ§€**: μ»¤λ°‹ λ©”μ‹μ§€μ— Claude κ΄€λ ¨ μΉ΄ν”ΌλΌμ΄νΈλ‚ μ„λ…μ„ ν¬ν•¨ν•μ§€ μ•μµλ‹λ‹¤
  - μ λ€ ν¬ν•¨ν•μ§€ μ•μ„ λ‚΄μ©: `π¤– Generated with [Claude Code]`, `Co-Authored-By: Claude` λ“±
- **κ°„κ²°ν• μ»¤λ°‹ λ©”μ‹μ§€**: λ³€κ²½ μ‚¬ν•­μ ν•µμ‹¬ λ‚΄μ©λ§ ν¬ν•¨ν•λ” κ°„κ²°ν• λ©”μ‹μ§€ μ‘μ„±
- **μΌκ΄€λ ν¬λ§·**: κΈ°μ΅΄ μ»¤λ°‹ νμ¤ν† λ¦¬μ™€ μΌκ΄€λ ν•μ‹ μ‚¬μ© (μ: `feat:`, `fix:`, `update:` λ“±)