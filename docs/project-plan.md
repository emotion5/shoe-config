# 범용 GLB 모델 컨피규레이터 개발 계획서

## 📋 프로젝트 개요
- **목표**: 어떤 GLB/GLTF 3D 모델이든 로드하여 머티리얼 색상을 실시간으로 변경할 수 있는 범용 웹 애플리케이션
- **모델**: `/public/models/` 폴더의 모든 GLB 파일 지원
- **핵심 기능**: 3D 모델의 모든 머티리얼 자동 탐색 및 색상 커스터마이징
- **개발 방식**: 애자일 방식 - MVP 먼저 구현 후 점진적 개선

## 🎯 MVP (Minimum Viable Product) 기능
1. GLB 파일 로드 및 3D 렌더링
2. 모델 회전/줌 인터랙션 (OrbitControls)
3. 모든 머티리얼 자동 탐색 및 리스트 표시
4. 머티리얼별 색상 변경 (색상 피커)
5. 설정 파일로 모델 경로 지정

## 📁 프로젝트 구조
```
250825-carconfig/
├── public/
│   ├── models/
│   │   └── *.glb                     # 여러 GLB 파일들
│   └── config.json                   # 모델 경로 설정
├── src/
│   ├── components/
│   │   ├── ModelViewer.tsx           # 3D 모델 뷰어 컴포넌트
│   │   ├── MaterialList.tsx          # 머티리얼 리스트 UI
│   │   ├── ColorPicker.tsx           # 색상 선택 UI
│   │   └── Scene.tsx                 # Three.js Scene 설정
│   ├── App.tsx                       # 메인 앱
│   └── main.tsx                      # 엔트리 포인트
```
*각 컴포넌트는 동일한 이름의 .module.css 파일을 가짐

## 🛠️ 기술 스택
- **이미 설치된 패키지**:
  - React + TypeScript
  - React Three Fiber (@react-three/fiber)
  - Drei (@react-three/drei)
  - Three.js

## 📝 구현 단계

### Phase 1: 기본 3D Scene 설정
**목표**: 3D 환경 구축 및 모델 로드

1. **App.tsx 수정**
   - Canvas 컴포넌트 추가
   - 기본 레이아웃 구성

2. **Scene.tsx 생성**
   - 조명 설정 (AmbientLight, DirectionalLight)
   - OrbitControls 추가
   - 배경 색상 설정

3. **ModelViewer.tsx 생성**
   - useGLTF 훅으로 모델 로드
   - 모델 중앙 정렬
   - 초기 스케일 조정

### Phase 2: 머티리얼 자동 탐색
**목표**: 모델의 모든 머티리얼 자동 감지 및 리스트화

1. **머티리얼 탐색 기능**
   - 모델 traverse로 모든 Mesh 탐색
   - 각 Mesh의 material 수집
   - 중복 제거 및 리스트 생성

2. **머티리얼 리스트 UI**
   - 발견된 모든 머티리얼 표시
   - 각 머티리얼 이름과 현재 색상 표시
   - 선택 가능한 리스트 형태

### Phase 3: 색상 변경 기능
**목표**: 각 머티리얼별 색상 변경

1. **ColorPicker.tsx 생성**
   - HTML color input 사용
   - 각 머티리얼별 개별 색상 피커
   - 실시간 미리보기

2. **색상 적용 로직**
   - Material.color 속성 직접 수정
   - 변경사항 즉시 반영
   - 모든 동일 머티리얼에 일괄 적용

### Phase 4: 설정 파일 구현
**목표**: 모델 경로를 설정 파일로 지정

1. **config.json 생성**
   - public 폴더에 설정 파일 배치
   - modelPath 필드로 GLB 파일 지정
   - 동적 로드 구현

2. **UI 레이아웃**
   - 3D 뷰어 영역 (왼쪽)
   - 머티리얼 리스트 패널 (오른쪽)
   - 반응형 디자인

### Phase 5: 최적화 (선택사항)
**향후 개선사항**:
- 로딩 인디케이터
- 에러 처리
- 성능 최적화
- 색상 히스토리/실행취소

## 🚀 구현 순서

### Step 1: 기본 Scene 구성
```typescript
// App.tsx
- Canvas 컴포넌트 추가
- Scene 컴포넌트 임포트

// Scene.tsx (새 파일)
- 조명 설정
- OrbitControls 설정
- 기본 환경 구성
```

### Step 2: 모델 로더
```typescript
// ModelViewer.tsx (새 파일)
- useGLTF 훅 사용
- 모델 렌더링
- 스케일/위치 조정
```

### Step 3: 머티리얼 탐색
```typescript
// ModelViewer.tsx 수정
- 모든 머티리얼 자동 탐색
- 머티리얼 리스트 생성
- MaterialList 컴포넌트로 전달
```

### Step 4: 색상 변경
```typescript
// ColorPicker.tsx (새 파일)
- 색상 선택 UI
- 색상 변경 콜백

// ModelViewer.tsx 수정
- 색상 변경 로직 추가
- Material 업데이트
```

### Step 5: 통합 및 스타일링
```typescript
// App.tsx 수정
- 전체 레이아웃 구성
- 컴포넌트 연결

// App.css 수정
- 레이아웃 스타일
- 반응형 디자인
```

## ✅ 체크리스트

### 필수 기능 (완료됨)
- [x] GLB 모델 로드 (설정 파일 기반) - config.json 구현
- [x] 3D 뷰어 (회전/줌) - OrbitControls 적용
- [x] 머티리얼 자동 탐색 - scene.traverse로 모든 머티리얼 수집
- [x] 머티리얼별 색상 변경 - HTML color picker 사용
- [x] 머티리얼 리스트 UI - 색상 프리뷰와 함께 리스트 표시
- [x] PBR 렌더링 - 환경맵, 톤매핑, SRGB 컬러스페이스 적용
- [x] 전문적인 다크테마 UI - 투명 효과와 플로팅 패널
- [x] 문의하기 버튼 - 하단 CTA 추가

### 구현된 추가 기능
- [x] 바닥 텍스처 - soil.png 텍스처로 그라운드 플레인
- [x] 유리 모프즘 디자인 - backdrop-filter blur 효과
- [x] 숨겨진 스크롤바 - 기능은 유지하며 시각적으로 숨김
- [x] CSS 모듈 시스템 - 컴포넌트별 스타일 격리
- [x] 머티리얼 상세 로깅 - 디버깅을 위한 머티리얼 속성 출력
- [x] 다중 모델 지원 - config.json에서 여러 모델 관리 및 선택기 UI
- [x] 로고 브랜딩 - "Uable Configurator" 브랜딩 표시
- [x] 이미지 다운로드 기능 - 3D 씬을 PNG로 캡처 및 저장
- [x] 커스텀 파비콘 - 자동차 모양 아이콘으로 브랜딩

### 향후 개선사항
- [ ] 파일 업로드 기능
- [ ] 프리셋 색상 저장
- [ ] 리셋 기능
- [ ] 메탈릭/러프니스 조절
- [ ] 설정 내보내기/가져오기
- [ ] 애니메이션 지원
- [ ] 다중 모델 지원

## 📌 주의사항
1. **성능**: 고폴리곤 모델의 경우 최적화 필요
2. **호환성**: GLB 파일 구조에 따라 파트 이름이 다를 수 있음
3. **상태관리**: 초기엔 useState로 시작, 필요시 Zustand 도입

## 🎨 현재 결과물 (완성됨)
- ✅ 중앙에 3D 모델 (어떤 GLB 파일이든 가능)
- ✅ 마우스로 회전/줌 가능 (OrbitControls)
- ✅ 오른쪽 플로팅 패널에 머티리얼 리스트
- ✅ 각 머티리얼별 색상 피커로 실시간 변경
- ✅ 범용적으로 사용 가능한 3D 컨피규레이터
- ✅ 전문적인 다크테마 UI (자동차 컨피규레이터 스타일)
- ✅ 물리 기반 렌더링 (PBR) 지원
- ✅ 바닥 텍스처와 스튜디오 환경 조명
- ✅ 반응형 디자인 및 유리 모프즘 효과
- ✅ 다중 모델 선택 드롭다운 (BMW, Maybach, SL63)
- ✅ "Uable Configurator" 브랜딩 로고
- ✅ 3D 씬 이미지 다운로드 기능 (PNG 내보내기)
- ✅ 커스텀 자동차 파비콘

## 📊 프로젝트 상태
- **계획 수립**: ✅ 완료
- **MVP 개발**: ✅ 완료 (2025-08-26)
- **UI/UX 개선**: ✅ 완료
- **다중 모델 지원**: ✅ 완료 (2025-08-28)
- **이미지 다운로드 기능**: ✅ 완료 (2025-08-28)
- **브랜딩 및 파비콘**: ✅ 완료 (2025-08-28)
- **최종 테스트**: ✅ 완료
- **문서화**: ✅ 완료

---

**작성일**: 2025-08-26  
**프로젝트명**: 250825-carconfig  
**최종 완료일**: 2025-08-28 (모든 기능 구현 완료)